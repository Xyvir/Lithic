caption: &#x1F4CC; pin/unpin tiddler
created: 20230201010900331
description: Show tiddler above ~StoryRiver
modified: 20251210060903295
tags: $:/tags/AboveStory $:/tags/ViewToolbar
title: $:/TiddlyTools/Pin

\whitespace trim
\define tid()		$(storyTiddler)$
\define here()		<<currentTiddler>>
\define config()	$:/config/TiddlyTools/Pin
\define button()	<$button class=tc-btn-invisible actions=<<toggle>> style=<<pin>> tooltip=<<tip>>>@@font-size:70%;&#x1F4CC;@@</$button>
\define toggle()	<$list filter="[<config>] [<tv-story-list>]"><$action-listops $subfilter="+[toggle<tid>]"/></$list>
\define styles()	<style>.story-backdrop > p { margin:0; }</style>
\define show()		<$list filter="[list<config>]" template="$:/core/ui/StoryTiddlerTemplate"/>
<$let pin={{{ [<config>!contains<tid>then[filter:grayscale()]] }}} tip={{{ [<config>contains<tid>then[un]] [[pin ]] [<tid>] +[join[]] }}}>
<$list filter="[<tid>!match[]!match<here>]"><<button>></$list>
<$list filter="[<tid>match[]]"><<styles>><<show>></$list>