created: 20210307211728499
icon: <svg width="22pt" height="22pt" class="tc-image-auto-height tc-image-button" viewBox="0 0 513 513"><path d="M379.985 351.727c-27.46 19.754-23.927 23.616-24.439-10.439l-.298-59.399-81.393.596v79.448c0 58.403-47.554 105.931-106.008 105.931h-35.336c-10.486 25.865-32.182 44.138-61.838 44.138C31.644 512.001 0 480.381 0 441.38c0-39.009 31.643-70.621 70.673-70.621 29.656 0 51.352 18.264 61.838 44.138h35.336c29.232 0 53.005-23.764 53.005-52.966v-79.448h-88.34c-10.486 25.865-32.182 44.138-61.838 44.138C31.644 326.621 0 295.001 0 256c0-39.009 31.643-70.621 70.673-70.621 29.656 0 51.352 18.264 61.838 44.138h88.34V150.07c0-29.21-23.772-52.966-53.005-52.966h-35.336c-10.486 25.865-32.182 44.138-61.838 44.138C31.644 141.242 0 109.622 0 70.621 0 31.612 31.643 0 70.672 0c29.656 0 51.352 18.264 61.838 44.138h35.336c58.455 0 106.008 47.519 106.008 105.931l.596 77.469 81.393-.596-1.191-64.278c-.433-23.352-.936-22.442 23.546-6.866l125.339 88.841c13.639 9.845 11.852 9.892-1.787 19.735"/></svg>
modified: 20251210060531350
revision: 2
tags: $:/tags/streams/root-buttons
title: $:/plugins/phiv/streams-fusion/fuse-button
type: text/vnd.tiddlywiki

\import $:/plugins/phiv/streams-fusion/macros $:/plugins/sq/streams/contextmenu/contextmenu-template $:/plugins/sq/streams/delete-hook/actions
\define menu-item(title subtitle actions)
		<$button class="tc-menu-list-item tc-btn-invisible"actions=<<__actions__>>>
			<span class=sq-contextmenu-itemwrapper>
				<span style="font-weight: bold;"class=sq-contextmenu-itemtext>$title$</span>
			</span>
		
\end
\define fuse-export()<$macrocall tiddler="$(storyTiddler)$"separator="$(separator)$"$name=stream-export/>
<$list filter="[<storyTiddler>has[stream-list]]">
<$vars fuse-menu-state=<<qualify [[$:/state/fuse-popup]]>>target=<<storyTiddler>>>
    <$button class="tc-btn-invisible szen-streams-btn"popup=<<fuse-menu-state>>>
        {{$:/plugins/phiv/streams-fusion/fuse-button!!icon}}
    </$button>
        <$reveal type=popup state=<<fuse-menu-state>>position=aboveright tag=div>
        	<div class="tc-drop-down sq-contextmenu">
				<$wikify text={{$:/config/sq/streams-fusion/fused-tiddler-title!!text}}name=export-name>
					<$macrocall title={{$:/plugins/phiv/streams-fusion/language##contextmenu-new}}actions=<<fuse-handler new>>$name=menu-item/>
					<$macrocall title={{$:/plugins/phiv/streams-fusion/language##contextmenu-overwrite}}actions=<<fuse-handler overwrite>>$name=menu-item/>
					<$macrocall title={{$:/plugins/phiv/streams-fusion/language##contextmenu-clipboard}}actions=<<fuse-handler clipboard>>$name=menu-item/>
					<<menu-divider>>
					<span class=tc-popup-keep style=min-width:fit-content>
						&nbsp;&nbsp;<$link to="$:/plugins/sq/streams/Settings/config">Quick settings :</$link>
							<table><tr><th>list format</th><th>output</th></tr><tr>
								<td>{{$:/config/sq/streams-fusion/listformat||$:/plugins/phiv/streams-fusion/ui/templates/settings/menu-radio-3}}</td>
								<td>{{$:/config/sq/streams-fusion/outputformat||$:/plugins/phiv/streams-fusion/ui/templates/settings/menu-radio-2}}</td>
							</tr></table>
					</span>
				</$wikify>
        	</div>
        </$reveal>
</$vars>
